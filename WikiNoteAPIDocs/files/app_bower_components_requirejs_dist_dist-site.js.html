<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>app/bower_components/requirejs/dist/dist-site.js - WikiNote API</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.8.0pr2/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <script src="http://yui.yahooapis.com/combo?3.8.0pr2/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            <h1><a href="../index.html"><img src="../assets/css/logo.png" width="117" height="52">WikiNote API: app/bower_components/requirejs/dist/dist-site.js</a></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.1.0</em>
        </div>
    </div>
    <div class="yui3-g">

        <div id="sidebar" class="yui3-u">
            <div id="modules" class="sidebox">
                <div class="hd">
                    <h2 class="no-toc">Modules</h2>
                </div>
                <div class="bd">
                    <ul>
                    </ul>
                </div>
            </div>
            
            <div id="classes" class="sidebox">
                <div class="hd">
                    <h2 class="no-toc">Classes</h2>
                </div>
                <div class="bd">
                    <ul>
                            <li><a href="../classes/data.html">data</a></li>
                    </ul>
                </div>
            </div>
            
            
            
            
            
            <div id="fileTree" class="sidebox">
                <div class="hd">
                    <h2 class="no-toc">Files</h2>
                </div>
                <div class="bd">
                    <ul><li>app/<ul><li>bower_components/<ul><li>jquery/<ul><li>dist/<ul><li><a href="../files/app_bower_components_jquery_dist_jquery.js.html">jquery.js</a></li></ul></li><li>src/<ul><li>ajax/<ul><li><a href="../files/app_bower_components_jquery_src_ajax_load.js.html">load.js</a></li></ul></li><li>core/<ul><li><a href="../files/app_bower_components_jquery_src_core_ready.js.html">ready.js</a></li></ul></li><li>css/<ul><li><a href="../files/app_bower_components_jquery_src_css_defaultDisplay.js.html">defaultDisplay.js</a></li></ul></li><li>data/<ul><li><a href="../files/app_bower_components_jquery_src_data_accepts.js.html">accepts.js</a></li></ul></li><li><a href="../files/app_bower_components_jquery_src_offset.js.html">offset.js</a></li><li>sizzle/<ul><li>dist/<ul><li><a href="../files/app_bower_components_jquery_src_sizzle_dist_sizzle.js.html">sizzle.js</a></li></ul></li></ul></li></ul></li></ul></li><li>marked/<ul><li>lib/<ul><li><a href="../files/app_bower_components_marked_lib_marked.js.html">marked.js</a></li></ul></li><li><a href="../files/app_bower_components_marked_marked.min.js.html">marked.min.js</a></li></ul></li><li>requirejs/<ul><li>dist/<ul><li><a href="../files/app_bower_components_requirejs_dist_dist-site.js.html">dist-site.js</a></li><li><a href="../files/app_bower_components_requirejs_dist_file.js.html">file.js</a></li></ul></li><li><a href="../files/app_bower_components_requirejs_require.js.html">require.js</a></li><li>tests/<ul><li>circular/<ul><li>complexPlugin/<ul><li><a href="../files/app_bower_components_requirejs_tests_circular_complexPlugin_slowText.js.html">slowText.js</a></li></ul></li></ul></li><li>jquery/<ul><li>scripts/<ul><li><a href="../files/app_bower_components_requirejs_tests_jquery_scripts_jquery-1.7.1.js.html">jquery-1.7.1.js</a></li></ul></li></ul></li><li>secondLateConfigPlugin/<ul><li>app/<ul><li>lib_/<ul><li>amd/<ul><li><a href="../files/app_bower_components_requirejs_tests_secondLateConfigPlugin_app_lib__amd_nonamd.js.html">nonamd.js</a></li><li><a href="../files/app_bower_components_requirejs_tests_secondLateConfigPlugin_app_lib__amd_text.js.html">text.js</a></li></ul></li></ul></li></ul></li></ul></li><li>text/<ul><li><a href="../files/app_bower_components_requirejs_tests_text_textBuilt.js.html">textBuilt.js</a></li></ul></li></ul></li></ul></li></ul></li><li>src/<ul><li><a href="../files/app_src_data.js.html">data.js</a></li></ul></li></ul></li></ul>
                </div>
            </div>
            
        </div>

        <div id="main" class="yui3-u">
            <div class="content"><h4>app/bower_components/requirejs/dist/dist-site.js</h4>

<pre class="code prettyprint linenums">
/**
 * @license RequireJS Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/requirejs for details
 */

/*
To run this file:

&gt; node dist-site.js

*/

/*jslint regexp: false, nomen: false, plusplus: false, strict: false */
/*global require: false, console: false */

var files, htmlFile, transFile, fileContents,
    preContents, postContents, h1, homePath, cssPath,
    ieCssPath, jsPath, length, j, title,
    isTopPage = false,
    fileIndex = 0,
    h1RegExp = /&lt;h1&gt;([^&lt;]+)&lt;\/h1&gt;/,
    file = require(&#x27;./file&#x27;),
    child_process = require(&#x27;child_process&#x27;);

//Copy all the text files to a dist directory
//file.deleteFile(&quot;./dist-site/&quot;);
file.copyFile(&quot;init.js&quot;, &quot;./dist-site/init.js&quot;);
file.copyDir(&quot;fonts&quot;, &quot;./dist-site/fonts&quot;, /\w/);
file.copyFile(&quot;../index.html&quot;, &quot;./dist-site/index.html&quot;);
file.copyDir(&quot;../docs/&quot;, &quot;./dist-site/docs/&quot;, /\w/);

preContents = file.readFile(&quot;pre.html&quot;);
postContents = file.readFile(&quot;post.html&quot;);

//Convert each .html file to a full HTML file
files = file.getFilteredFileList(&quot;./dist-site&quot;, /\.html$/, true);

function processFile() {
    htmlFile = files[fileIndex];
    fileIndex += 1;
    if (!htmlFile) {
        //Done processing files.
        return;
    }

    transFile = htmlFile + &#x27;.trans&#x27;;

    console.log(&quot;Creating &quot; + htmlFile);

    //Do Markdown
    child_process.exec(
        &quot;./Markdown.pl --html4tags &quot; + htmlFile + &quot; &gt; &quot; + transFile,
        function (error, stdout, stderr) {
            if (error) {
                console.log(&#x27;Could not markdown &#x27; + htmlFile);
                processFile();
                return;
            }

            //Build up a complete HTML file.
            fileContents = file.readFile(transFile);

            //Find the page title.
            title = h1RegExp.exec(fileContents);
            title = title &amp;&amp; title[1];

            fileContents = preContents + fileContents + postContents;

            //Set the title of the HTML page
            h1 = fileContents.match(/&lt;h1&gt;([^&lt;]+)&lt;\/h1&gt;/);
            if (h1 &amp;&amp; h1[1]) {
                h1 = h1[1];
            } else {
                h1 = &quot;&quot;;
            }

            fileContents = fileContents.replace(/\$\{title\}/, h1);

            //Change any .md references to .html references, and remove tree/master
            //links
            fileContents = fileContents
                           .replace(/href=&quot;requirejs\/tree\/master\/docs\//g, &#x27;href=&quot;docs/&#x27;)
                           .replace(/href=&quot;([^&quot;]+)\.md/g, &#x27;href=&quot;$1.html&#x27;);

            //Adjust the path the home and main.css
            homePath = htmlFile.replace(/\/[^\/]+$/, &quot;&quot;).replace(/^\.\/dist-site\//, &quot;&quot;);
            if (!homePath || homePath === &quot;dist-site&quot;) {
                isTopPage = true;
                homePath = &quot;./&quot;;
                cssPath = &quot;main.css&quot;;
                ieCssPath = &quot;ie.css&quot;;
                jsPath = &quot;init.js&quot;;
            } else {
                isTopPage = false;
                length = homePath.split(&quot;/&quot;).length;
                homePath = &quot;&quot;;
                for (j = 0; j &lt; length - 1; j++) {
                    homePath += &quot;../&quot;;
                }
                cssPath = homePath + &quot;main.css&quot;;
                ieCssPath = homePath + &quot;ie.css&quot;;
                jsPath = homePath + &quot;init.js&quot;;
            }
            fileContents = fileContents.replace(/HOMEPATH/g, homePath);
            fileContents = fileContents.replace(/\main\.css/, cssPath);
            fileContents = fileContents.replace(/\ie\.css/, ieCssPath);
            fileContents = fileContents.replace(/\init\.js/, jsPath);

            //Set the page title to be the first h1 tag name
            if (title) {
                fileContents = fileContents.replace(/&lt;title&gt;[^&lt;]*&lt;\/title&gt;/, &#x27;&lt;title&gt;&#x27; + title + &#x27;&lt;/title&gt;&#x27;);
            }

            //If it is the top page, adjust the header links
            if (isTopPage) {
                fileContents = fileContents
                               .replace(/href=&quot;\.\.\/&quot;/g, &#x27;href=&quot;./&quot;&#x27;)
                               .replace(/class=&quot;local&quot; href=&quot;([^&quot;]+)&quot;/g, &#x27;class=&quot;local&quot; href=&quot;docs/$1&quot;&#x27;);
            }

            file.saveFile(htmlFile, fileContents);

            file.deleteFile(transFile);

            processFile();
        }
    );
}

processFile();

</pre>

</div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/js/tabs.js"></script>
</body>
</html>
